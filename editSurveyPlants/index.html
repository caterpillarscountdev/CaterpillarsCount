<html>
	<head>
		<!-- Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-113319025-1"></script>
		<script>
  			window.dataLayer = window.dataLayer || [];
  			function gtag(){dataLayer.push(arguments);}
  			gtag('js', new Date());
			gtag('config', 'UA-113319025-1');
		</script>
		<!-- End of Google Analytics -->

		<title>Edit Survey Plants | Caterpillars Count!</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="apple-touch-icon-precomposed" sizes="57x57" href="../images/favicon/apple-touch-icon-57x57.png" />
		<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../images/favicon/apple-touch-icon-114x114.png" />
		<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../images/favicon/apple-touch-icon-72x72.png" />
		<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../images/favicon/apple-touch-icon-144x144.png" />
		<link rel="apple-touch-icon-precomposed" sizes="60x60" href="../images/favicon/apple-touch-icon-60x60.png" />
		<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../images/favicon/apple-touch-icon-120x120.png" />
		<link rel="apple-touch-icon-precomposed" sizes="76x76" href="../images/favicon/apple-touch-icon-76x76.png" />
		<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../images/favicon/apple-touch-icon-152x152.png" />
		<link rel="icon" type="image/png" href="../images/favicon/favicon-196x196.png" sizes="196x196" />
		<link rel="icon" type="image/png" href="../images/favicon/favicon-96x96.png" sizes="96x96" />
		<link rel="icon" type="image/png" href="../images/favicon/favicon-32x32.png" sizes="32x32" />
		<link rel="icon" type="image/png" href="../images/favicon/favicon-16x16.png" sizes="16x16" />
		<link rel="icon" type="image/png" href="../images/favicon/favicon-128.png" sizes="128x128" />
		<meta name="msapplication-TileColor" content="transparent" />
		<meta name="msapplication-TileImage" content="../images/favicon/mstile-144x144.png" />
		<meta name="msapplication-square70x70logo" content="../images/favicon/mstile-70x70.png" />
		<meta name="msapplication-square150x150logo" content="../images/favicon/mstile-150x150.png" />
		<meta name="msapplication-wide310x150logo" content="../images/favicon/mstile-310x150.png" />
		<meta name="msapplication-square310x310logo" content="../images/favicon/mstile-310x310.png" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
		<link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Fanwood+Text:400i" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Roboto+Slab" rel="stylesheet">
		<link href="../css/template.css" rel="stylesheet">
		<script src="../js/template.js?v=2"></script>
		<link href="../css/checkbox.css?v=1" rel="stylesheet">
		<script src="../js/checkbox.js?v=1"></script>
		<style>
			ul.ui-autocomplete{
				width:753px;
				box-sizing:border-box;
				padding:0px;
			}
			@media screen and (max-width: 999px) {
				ul.ui-autocomplete{
					width:100%;
					padding:0px 122px 0px 125px;
				}
			}
			@media screen and (max-width: 770px) {
				ul.ui-autocomplete{
					padding:0px 42px 0px 45px;
				}
			}
			ul.ui-autocomplete>li{
				background:#888;/*#a1c3ff;*/
				color:#fff;
				font-size:18px;
				padding:5px 25px;
				box-sizing:border-box;
				list-style-type:none;
			}

			ul.ui-autocomplete>li:last-of-type{
				border-radius:0px 0px 4px 4px;
				overflow:hidden;
				border-bottom:2px solid rgba(0,0,0,.2);
			}

			.ui-helper-hidden-accessible{
				display:none;
			}

			.ui-menu-item{
				font-size:14px;
				font-family: 'Roboto Slab', serif;
				cursor:pointer;
			}

			#saveAllButton, #addNewCircle{
				display:none;
			}

			.circle{
				margin:20px 0px;
				border-radius:4px;
				overflow:hidden;
				border:2px solid #eee;
			}

			.circleTitle{
				font-size:20px;
				background:#f7f7f7;
				color:#aaa;
				padding:20px;
				cursor:pointer;

			}
			.plants{
				font-size:14px;
				background:#f7f7f7;
				max-height:0px;
				overflow:hidden;
				border-right:2px solid #eee;
				border-bottom:2px solid #eee;
			}
			.circleTitle, .plants{
				font-family: 'Roboto Slab', serif;
			}

			.noticeImage{
				margin:4px 8px 4px 0px;
				height:18px;
				float:right;
			}

			.plant{
				border-left:5px solid transparent;
				padding:20px;
			}

			.plant:nth-of-type(1){
				border-color:#ff7575;
			}
			.plant:nth-of-type(1) .code{
				color:#ff7575;
			}

			.plant:nth-of-type(2){
				border-color:#75b3ff;
			}
			.plant:nth-of-type(2) .code{
				color:#75b3ff;
			}

			.plant:nth-of-type(3){
				border-color:#5abd61;
			}
			.plant:nth-of-type(3) .code{
				color:#5abd61;
			}

			.plant:nth-of-type(4){
				border-color:#ffc875;
			}
			.plant:nth-of-type(4) .code{
				color:#ffc875;
			}

			.plant:nth-of-type(5){
				border-color:#9175ff;
			}
			.plant:nth-of-type(5) .code{
				color:#9175ff;
			}
			.code{
				font-weight:bold;
				font-size:120%;
			}

			.code img{
				height:20px;
				margin-right:7px;
				margin-bottom:-3px;
			}

			.editableFieldTitle{
				color:#aaa;
				margin-top:10px;
			}
			
			.checkboxTableHolder{
				position:relative;
			}
			
			.checkboxTableOverlay{
				position:absolute;
				top:0px;
				left:0px;
				width:100%;
				height:100%;
			}

			#addNewCircle{
				margin:20px 0px;
				border-radius:4px;
				overflow:hidden;
				border:2px solid #eee;
				border-bottom:4px solid #eee;
				font-size:20px;
				background:#f7f7f7;
				color:#aaa;
				padding:20px;
				cursor:pointer;
				font-family: 'Roboto Slab', serif;
				position:relative;
			}

			#addNewCircle .plusImage {
			    height: 34px;
			    width: 34px;
			    background-size: contain;
			    background-repeat: no-repeat;
			    background-position: center;
			    display: inline-block;
			    opacity: .4;
			    position: absolute;
			    right: 20px;
			    top: 16px;
			}

			@media screen and (max-width: 620px) {
				main button{
					width:100%;
				}
			}
		</style>
		<script>
			requireLogIn();
			
			var plantSpeciesList = ["Acacia spp.", "Maple spp.", "Acer spp.", "Buckeye spp.", "Aesculus spp.", "Ailanthus spp.", "Alder spp.", "Alnus spp.", "Madrone spp.", "Arbutus spp.", "Birch spp.", "Betula spp.", "Boxwood spp.", "Buxus spp.", "Sweetshrub spp.", "Calycanthus spp.", "Camellia spp.", "Hornbeam spp.", "Carpinus spp.", "Hickory spp.", "Carya spp.", "Chestnut spp.", "Castanea spp.", "Sheoak spp.", "Casuarina spp.", "Catalpa spp.", "Hackberry spp.", "Celtis spp.", "Fringetree spp.", "Chionanthus spp.", "Citrus spp.", "Cleyera spp.", "Dogwood spp.", "Cornus spp.", "Hazelnut spp.", "Corylus spp.", "Hawthorn spp.", "Crataegus spp.", "Bush honeysuckle spp.", "Diervilla spp.", "Persimmon spp.", "Diospyros spp.", "Eucalyptus spp.", "Beech spp.", "Fagus spp.", "Fig spp.", "Ficus spp.", "Forsythia spp.", "Ash spp.", "Fraxinus spp.", "Gardenia spp.", "Huckleberry spp.", "Gaylussacia spp.", "Locust spp.", "Gleditsia spp.", "Silverbell spp.", "Halesia spp.", "Hydrangea spp.", "Walnut spp.", "Juglans spp.", "Privet spp.", "Ligustrum spp.", "Spicebush spp.", "Lindera spp.", "Honeysuckle spp.", "Lonicera spp.", "Magnolia spp.", "Apple spp.", "Malus spp.", "Mulberry spp.", "Morus spp.", "Tupelo spp.", "Nyssa spp.", "Tupelo spp.", "Nyssa spp.", "Hophornbeam spp.", "Ostrya spp.", "Bay spp.", "Persea spp.", "Sycamore spp.", "Platanus spp.", "Sycamore spp.", "Platanus spp.", "NA spp.", "Podocarpus spp.", "Cottonwood and poplar spp.", "Populus spp.", "Mesquite spp.", "Prosopis spp.", "Cherry spp.", "Prunus spp.", "Cherry and plum spp.", "Prunus spp.", "Pear spp.", "Pyrus spp.", "Oak spp.", "Quercus spp.", "Buckthorn spp.", "Rhamnus spp.", "Azalea, rhododendron spp.", "Rhododendron spp.", "Sumac spp.", "Rhus spp.", "Rose spp.", "Rosa spp.", "Royal palm spp.", "Roystonea spp.", "Brambles spp.", "Rubus spp.", "Willow spp.", "Salix spp.", "Elderberry spp.", "Sambucus spp.", "Sassafras spp.", "Mountain-ash spp.", "Sorbus spp.", "Stewartia spp.", "Lilac spp.", "Syringa spp.", "Saltcedar spp.", "Tamarix spp.", "Basswood spp.", "Tilia spp.", "Torreya spp.", "Elm spp.", "Ulmus spp.", "Blueberry spp.", "Vaccinium spp.", "Viburnum spp.", "Wisteria spp.", "Sweet acacia", "Acacia farnesiana", "Catclaw acacia", "Acacia greggii", "Trident maple", "Acer buergerianum", "Hedge maple", "Acer campestre", "Horned maple", "Acer diabolicum", "Florida maple", "Acer floridanum", "Amur maple", "Acer ginnala", "Rocky mountain maple", "Acer glabrum", "Bigtooth maple", "Acer grandidentatum", "Chalk maple", "Acer leucoderme", "Bigleaf maple", "Acer macrophyllum", "Boxelder", "Acer negundo", "Black maple", "Acer nigrum", "Japanese maple", "Acer palmatum", "Striped maple", "Acer pensylvanicum", "Norway maple", "Acer platanoides", "Red maple", "Acer rubrum", "Silver maple", "Acer saccharinum", "Sugar maple", "Acer saccharum", "Mountain maple", "Acer spicatum", "Freeman maple", "Acer X freemanii", "Everglades palm", "Acoelorraphe wrightii", "California buckeye", "Aesculus californica", "Yellow buckeye", "Aesculus flava", "Ohio buckeye", "Aesculus glabra", "Horse chestnut", "Aesculus hippocastanum", "Bottlebrush buckeye", "Aesculus parviflora", "Red buckeye", "Aesculus pavia", "Painted buckeye", "Aesculus sylvatica", "Aesculus flava", "Tree of heaven", "Ailanthus altissima", "Mimosa", "Albizia julibrissin", "European alder", "Alnus glutinosa", "Arizona alder", "Alnus oblongifolia", "White alder", "Alnus rhombifolia", "Red alder", "Alnus rubra", "Hazel alder", "Alnus serrulata", "Grey alder", "Alnus incana", "Serviceberry", "Amelanchier", "Common serviceberry", "Amelanchier arborea", "Allegheny serviceberry", "Amelanchier laevis", "Roundleaf serviceberry", "Amelanchier sanguinea", "Sea torchwood", "Amyris elemifera", "Pond-apple", "Annona glabra", "Arizona madrone", "Arbutus arizonica", "Pacific madrone", "Arbutus menziesii", "Texas madrone", "Arbutus xalapensis", "Dwarf pawpaw", "Asimina pygmea", "Pawpaw", "Asimina triloba", "Black-mangrove", "Avicennia germinans", "Eastern baccharis", "Baccharis halimifolia", "Yellow birch", "Betula alleghaniensis", "Sweet birch", "Betula lenta", "White birch", "Betula minor", "River birch", "Betula nigra", "Water birch", "Betula occidentalis", "Paper birch", "Betula papyrifera", "Gray birch", "Betula populifolia", "Virginia roundleaf birch", "Betula uber", "Northwestern paper birch", "Betula x utahensis", "Gumbo limbo", "Bursera simaruba", "American beautyberry", "Callicarpa americana", "Incense-cedar", "Calocedrus decurrens", "Eastern sweetshrub", "Calycanthus floridus", "American hornbeam", "Carpinus caroliniana", "Mockernut hickory", "Carya alba", "Water hickory", "Carya aquatica", "Southern shagbark hickory", "Carya carolinae-septentrionalis", "Bitternut hickory", "Carya cordiformis", "Scrub hickory", "Carya floridana", "Pignut hickory", "Carya glabra", "Pecan", "Carya illinoinensis", "Shellbark hickory", "Carya laciniosa", "Nutmeg hickory", "Carya myristiciformis", "Red hickory", "Carya ovalis", "Shagbark hickory", "Carya ovata", "Sand hickory", "Carya pallida", "Black hickory", "Carya texana", "Carya tomentosa", "American chestnut", "Castanea dentata", "Chinese chestnut", "Castanea mollissima", "Chinquapin", "Castanea pumila", "Gray sheoak", "Casuarina glauca", "Belah", "Casuarina lepidophloia", "Southern catalpa", "Catalpa bignonioides", "Northern catalpa", "Catalpa speciosa", "Oriental bittersweet", "Celastrus orbiculatus", "Sugarberry", "Celtis laevigata", "Western hackberry", "Celtis occidentalis", "Common buttonbush", "Cephalanthus occidentalis", "Eastern redbud", "Cercis canadensis", "Curlleaf mountain-mahogany", "Cercocarpus ledifolius", "Chinese quince", "Chaenomeles sinensis", "Fragrant wintersweet", "Chimonanthus praecox", "Giant chinkapin", "Chrysolepis chrysophylla", "Camphortree", "Cinnamomum camphora", "Florida fiddlewood", "Citharexylum fruticosum", "Kentucky yellowwood", "Cladrastis kentukea", "Tietongue", "Coccoloba diversifolia", "Florida silver palm", "Coccothrinax argentata", "Coconut palm", "Cocos nucifera", "Soldierwood", "Colubrina elliptica", "Bluewood", "Condalia hookeri", "Buttonwood-mangrove", "Conocarpus erectus", "Anacahuita", "Cordia boissieri", "Largeleaf geigertree", "Cordia sebestena", "Alternate-leaf dogwood", "Cornus alternifolia", "Silky dogwood", "Cornus amomum", "Roughleaf dogwood", "Cornus drummondii", "Flowering dogwood", "Cornus florida", "Stiff dogwood", "Cornus foemina", "Kousa dogwood", "Cornus kousa", "Big-leaf dogwood", "Cornus macrophylla", "Cornelian cherry", "Cornus mas", "Pacific dogwood", "Cornus nuttallii", "Redosier dogwood", "Cornus sericea", "Grey dogwood", "Cornus racemosa", "American hazelnut", "Corylus americana", "Beaked hazel", "Corylus cornuta", "Smoketree", "Cotinus obovatus", "Brainerd's hawthorn", "Crataegus brainerdii", "Pear hawthorn", "Crataegus calpodendron", "Fireberry hawthorn", "Crataegus chrysocarpa", "Cockspur hawthorn", "Crataegus crus-galli", "Broadleaf hawthorn", "Crataegus dilatata", "Fanleaf hawthorn", "Crataegus flabellata", "Downy hawthorn", "Crataegus mollis", "Oneseed hawthorn", "Crataegus monogyna", "Scarlet hawthorn", "Crataegus pedicellata", "Washington hawthorn", "Crataegus phaenopyrum", "Fleshy hawthorn", "Crataegus succulenta", "Dwarf hawthorn", "Crataegus uniflora", "Crataegus coccinioides", "Carrotwood", "Cupaniopsis anacardioides", "Swamp titi", "Cyrilla racemiflora", "Texas persimmon", "Diospyros texana", "Common persimmon", "Diospyros virginiana", "Blackbead ebony", "Ebenopsis ebano", "Oriental paperbush", "Edgeworthia chrysantha", "Anacua knockaway", "Ehretia anacua", "Russian olive", "Elaeagnus angustifolia", "Autumn olive", "Elaeagnus umbellata", "River redgum", "Eucalyptus camaldulensis", "Tasmanian bluegum", "Eucalyptus globulus", "Grand eucalyptus", "Eucalyptus grandis", "Swampmahogany", "Eucalyptus robusta", "Red stopper", "Eugenia rhombea", "Burningbush", "Euonymus alatus", "European spindletree", "Euonymus europaeus", "Yeddo euonymous", "Euonymus hamiltonianus", "Butterbough", "Exothea paniculata", "American beech", "Fagus grandifolia", "European beech", "Fagus sylvatica", "Japanese knotweed", "Fallopia japonica", "Speckled japanese aralla", "Fatsia japonica", "Florida strangler fig", "Ficus aurea", "Wild banyantree", "Ficus citrifolia", "Florida swampprivet", "Forestiera segregata", "White ash", "Fraxinus americana", "Berlandier ash", "Fraxinus berlandieriana", "Carolina ash", "Fraxinus caroliniana", "Oregon ash", "Fraxinus latifolia", "Black ash", "Fraxinus nigra", "Green ash", "Fraxinus pennsylvanica", "Pumpkin ash", "Fraxinus profunda", "Blue ash", "Fraxinus quadrangulata", "Texas ash", "Fraxinus texensis", "Velvet ash", "Fraxinus velutina", "Black huckleberry", "Gaylussacia baccata", "Ginkgo", "Ginkgo biloba", "Waterlocust", "Gleditsia aquatica", "Honeylocust", "Gleditsia triacanthos", "Loblolly-bay", "Gordonia lasianthus", "Beeftree", "Guapira discolor", "Kentucky coffeetree", "Gymnocladus dioicus", "Carolina silverbell", "Halesia carolina", "Two-wing silverbell", "Halesia diptera", "Little silverbell", "Halesia parviflora", "Witch-hazel", "Hamamelis virginiana", "Ozark witch hazel", "Hamamelis vernalis", "Rose of sharon", "Hibiscus syriacus", "Manchineel", "Hippomane mancinella", "Raisin", "Hovenia dulcis", "Oakleaf hydrangea", "Hydrangea quercifolia", "Possumhaw", "Ilex decidua", "Inkberry", "Ilex glabra", "Mountain holly", "Ilex montana", "Catberry", "Ilex mucronata", "American holly", "Ilex opaca", "Winterberry", "Ilex verticillata", "Yaupon", "Ilex vomitoria", "Virginia sweetspire", "Itea virginica", "Southern california black walnut", "Juglans californica", "Butternut", "Juglans cinerea", "Northern california black walnut", "Juglans hindsii", "Arizona walnut", "Juglans major", "Texas walnut", "Juglans microcarpa", "Black walnut", "Juglans nigra", "Mountain laurel", "Kalmia latifolia", "Castor aralia", "Kalopanax septemlobus", "Flamegold", "Koelreuteria elegans", "Golden rain tree", "Koelreuteria paniculata", "Crapemyrtle", "Lagerstroemia indica", "White-mangrove", "Laguncularia racemosa", "Great leucaene", "Leucaena pulverulenta", "Coastal doghobble", "Leucothoe axillaris", "Japanese privet", "Ligustrum japonicum", "Waxyleaf privet", "Ligustrum quihoui", "Northern spicebush", "Lindera benzoin", "Sweetgum", "Liquidambar styraciflua", "Tuliptree", "Liriodendron tulipifera", "Tanoak", "Lithocarpus densiflorus", "Pink honeysuckle", "Lonicera hispidula", "Japanese honeysuckle", "Lonicera japonica", "Amur honeysuckle", "Lonicera maackii", "Tatarian honeysuckle", "Lonicera tatarica", "False tamarind", "Lysiloma latisiliquum", "Amur maackia", "Maackia amurensis", "Osage-orange", "Maclura pomifera", "Cucumbertree", "Magnolia acuminata", "Fraser's magnolia", "Magnolia fraseri", "Southern magnolia", "Magnolia grandiflora", "Bigleaf magnolia", "Magnolia macrophylla", "Pyramid magnolia", "Magnolia pyramidata", "Umbrella magnolia", "Magnolia tripetala", "Sweetbay", "Magnolia virginiana", "Loebner magnolia", "Magnolia X loebneri", "Southern crab apple", "Malus angustifolia", "Siberian crab apple", "Malus baccata", "Sweet crab apple", "Malus coronaria", "Oregon crab apple", "Malus fusca", "Prairie crab apple", "Malus ioensis", "Toringa crab apple", "Malus sieboldii", "Mango", "Mangifera indica", "Melaleuca", "Melaleuca quinquenervia", "Chinaberry", "Melia azedarach", "Florida poisontree", "Metopium toxiferum", "Southern bayberry", "Morella caroliniensis", "Wax myrtle", "Morella cerifera", "Red bay", "Morella rubra", "White mulberry", "Morus alba", "Texas mulberry", "Morus microphylla", "Black mulberry", "Morus nigra", "Red mulberry", "Morus rubra", "Heavenly bamboo", "Nandina domestica", "Water tupelo", "Nyssa aquatica", "Swamp tupelo", "Nyssa biflora", "Ogeechee tupelo", "Nyssa ogeche", "Blackgum", "Nyssa sylvatica", "Desert ironwood", "Olneya tesota", "Eastern hophornbeam", "Ostrya virginiana", "Sourwood", "Oxydendrum arboreum", "Persian ironwood", "Parrotia persica", "Paulownia  empress-tree", "Paulownia tomentosa", "Avocado", "Persea americana", "Redbay", "Persea borbonia", "Common ninebark", "Physocarpus opulifolius", "Fishpoison tree", "Piscidia piscipula", "Water-elm  planertree", "Planera aquatica", "American sycamore", "Platanus occidentalis", "California sycamore", "Platanus racemosa", "Arizona sycamore", "Platanus wrightii", "Silver poplar", "Populus alba", "Narrowleaf cottonwood", "Populus angustifolia", "Balsam poplar", "Populus balsamifera", "Eastern cottonwood", "Populus deltoides", "Fremont cottonwood", "Populus fremontii", "Bigtooth aspen", "Populus grandidentata", "Swamp cottonwood", "Populus heterophylla", "Lombardy poplar", "Populus nigra", "Quaking aspen", "Populus tremuloides", "Honey mesquite", "Prosopis glandulosa", "Screwbean mesquite", "Prosopis pubescens", "Velvet mesquite", "Prosopis velutina", "Allegheny plum", "Prunus alleghaniensis", "American plum", "Prunus americana", "Chickasaw plum", "Prunus angustifolia", "Sweet cherry", "Prunus avium", "Sour cherry", "Prunus cerasus", "European plum", "Prunus domestica", "Bitter cherry", "Prunus emarginata", "Cherry laurel", "Prunus laurocerasus", "Mahaleb cherry", "Prunus mahaleb", "Beach plum", "Prunus maritima", "Japanese apricot", "Prunus mume", "Canada plum", "Prunus nigra", "Pin cherry", "Prunus pensylvanica", "Peach", "Prunus persica", "Black cherry", "Prunus serotina", "Chokecherry", "Prunus virginiana", "Kwanzan cherry", "Prunus serrulata", "Weeping cherry", "Prunus subhirtella", "Wafer ash", "Ptelea trifoliata", "Buffalo nut", "Pyrularia pubera", "Callery pear", "Pyrus calleryana", "California live oak", "Quercus agrifolia", "White oak", "Quercus alba", "Arizona white oak", "Quercus arizonica", "Swamp white oak", "Quercus bicolor", "Buckley oak", "Quercus buckleyi", "Canyon live oak", "Quercus chrysolepis", "Scarlet oak", "Quercus coccinea", "Blue oak", "Quercus douglasii", "Northern pin oak", "Quercus ellipsoidalis", "Emory oak", "Quercus emoryi", "Engelmann oak", "Quercus engelmannii", "Southern red oak", "Quercus falcata", "Gambel oak", "Quercus gambelii", "Oregon white oak", "Quercus garryana", "Ring-cup oak", "Quercus glauca", "Chisos oak", "Quercus graciliformis", "Graves oak", "Quercus gravesii", "Gray oak", "Quercus grisea", "Silverleaf oak", "Quercus hypoleucoides", "Bear oak", "Quercus ilicifolia", "Shingle oak", "Quercus imbricaria", "Bluejack oak", "Quercus incana", "California black oak", "Quercus kelloggii", "Lacey oak", "Quercus laceyi", "Turkey oak", "Quercus laevis", "Laurel oak", "Quercus laurifolia", "California white oak", "Quercus lobata", "Overcup oak", "Quercus lyrata", "Bur oak", "Quercus macrocarpa", "Dwarf post oak", "Quercus margarettiae", "Blackjack oak", "Quercus marilandica", "Swamp chestnut oak", "Quercus michauxii", "Dwarf live oak", "Quercus minima", "Chestnut oak", "Quercus montana", "Chinkapin oak", "Quercus muehlenbergii", "Water oak", "Quercus nigra", "Mexican blue oak", "Quercus oblongifolia", "Oglethorpe oak", "Quercus oglethorpensis", "Cherrybark oak", "Quercus pagoda", "Pin oak", "Quercus palustris", "Willow oak", "Quercus phellos", "Mexican white oak", "Quercus polymorpha", "Dwarf chinkapin oak", "Quercus prinoides", "English oak", "Quercus robur", "Northern red oak", "Quercus rubra", "Netleaf oak", "Quercus rugosa", "Shumard oak", "Quercus shumardii", "Delta post oak", "Quercus similis", "Durand oak", "Quercus sinuata", "Post oak", "Quercus stellata", "Texas red oak", "Quercus texana", "Black oak", "Quercus velutina", "Live oak", "Quercus virginiana", "Interior live oak", "Quercus wislizeni", "Common buckthorn", "Rhamnus cathartica", "Frangula alnus", "Rhamnus frangula", "American mangrove", "Rhizophora mangle", "Dwarf azalea", "Rhododendron atlanticum", "Florida azalea", "Rhododendron austrinum", "Mountain azalea", "Rhododendron canescens", "Catawba rhododendron", "Rhododendron catawbiense", "Piedmont azalea", "Rhododendron flammeum", "Great rhododendron", "Rhododendron maximum", "Plumleaf azalea", "Rhododendron prunifolium", "Jetbead", "Rhodotypos scandens", "Winged sumac", "Rhus copallinum", "Smooth sumac", "Rhus glabra", "Staghorn sumac", "Rhus typhina", "New mexico locust", "Robinia neomexicana", "Black locust", "Robinia pseudoacacia", "Multiflora rose", "Rosa multiflora", "Wineberry", "Rubus phoenicolasius", "Mexican palmetto", "Sabal mexicana", "Cabbage palmetto", "Sabal palmetto", "White willow", "Salix alba", "Peachleaf willow", "Salix amygdaloides", "Weeping willow", "Salix babylonica", "Bebb willow", "Salix bebbiana", "Bonpland willow", "Salix bonplandiana", "Coastal plain willow", "Salix caroliniana", "Black willow", "Salix nigra", "Balsam willow", "Salix pyrifolia", "Scoulers willow", "Salix scouleriana", "Red elderberry", "Sambucus racemosa", "Western soapberry", "Sapindus saponaria", "Sassafras", "Sassafras albidum", "Octopus tree", "Schefflera actinophylla", "False mastic", "Sideroxylon foetidissimum", "Chittamwood", "Sideroxylon lanuginosum", "White bully", "Sideroxylon salicifolium", "Paradisetree", "Simarouba glauca", "Texas sophora", "Sophora affinis", "American mountain-ash", "Sorbus americana", "European mountain-ash", "Sorbus aucuparia", "Northern mountain-ash", "Sorbus decora", "American bladdernut", "Staphylea trifolia", "Japanese snowbell", "Styrax japonicus", "West indian mahogany", "Swietenia mahagoni", "Sweetleaf", "Symplocos tinctoria", "Japanese tree lilac", "Syringa reticulata", "Java plum", "Syzygium cumini", "Tamarind", "Tamarindus indica", "Key thatch palm", "Thrinax morrisii", "Florida thatch palm", "Thrinax radiata", "American basswood", "Tilia americana", "Littleleaf linden", "Tilia cordata", "Common lime", "Tilia X europaea", "California torreya", "Torreya californica", "Florida torreya", "Torreya taxifolia", "Chinese tallowtree", "Triadica sebifera", "Winged elm", "Ulmus alata", "American elm", "Ulmus americana", "Cedar elm", "Ulmus crassifolia", "Siberian elm", "Ulmus pumila", "Slippery elm", "Ulmus rubra", "September elm", "Ulmus serotina", "Rock elm", "Ulmus thomasii", "California laurel", "Umbellularia californica", "Highbush blueberry", "Vaccinium corymbosum", "Deerberry", "Vaccinium stamineum", "Tungoil tree", "Vernicia fordii", "Viburnum", "Mapleleaf viburnum", "Viburnum acerifolium", "Southern arrowwood", "Viburnum dentatum", "Linden arrowwood", "Viburnum dilatatum", "Nannyberry", "Viburnum lentago", "Possumhaw viburnum", "Viburnum nudum", "European cranberrybush", "Viburnum opulus", "Japanese snowball", "Viburnum plicatum", "Blackhaw", "Viburnum prunifolium", "Rusty blackhaw", "Viburnum rufidulum", "Canyon grape", "Vitis arizonica", "Joshua tree", "Yucca brevifolia", "Japanese zelkova", "Zelkova serrata", "Fir spp.", "Abies spp.", "White-cedar spp.", "Chamaecyparis spp.", "Cypress spp.", "Cupressus spp.", "Redcedar/juniper spp.", "Juniperus spp.", "Larch spp.", "Larix spp.", "Spruce spp.", "Picea spp.", "Pine spp.", "Pinus spp.", "Douglas-fir spp.", "Pseudotsuga spp.", "Baldcypress spp.", "Taxodium spp.", "Yew spp.", "Taxus spp.", "Thuja spp.", "Hemlock spp.", "Tsuga spp.", "Pacific silver fir", "Abies amabilis", "Balsam fir", "Abies balsamea", "Bristlecone fir", "Abies bracteata", "White fir", "Abies concolor", "Fraser fir", "Abies fraseri", "Grand fir", "Abies grandis", "Subalpine fir", "Abies lasiocarpa", "California red fir", "Abies magnifica", "Noble fir", "Abies procera", "Shasta red fir", "Abies shastensis", "Port-orford-cedar", "Chamaecyparis lawsoniana", "Alaska yellow-cedar", "Chamaecyparis nootkatensis", "Atlantic white-cedar", "Chamaecyparis thyoides", "Arizona cypress", "Cupressus arizonica", "Modoc cypress", "Cupressus bakeri", "Tecate cypress", "Cupressus forbesii", "Macnabs cypress", "Cupressus macnabiana", "Monterey cypress", "Cupressus macrocarpa", "Sargents cypress", "Cupressus sargentii", "Ashe juniper", "Juniperus ashei", "California juniper", "Juniperus californica", "Redberry juniper", "Juniperus coahuilensis", "Alligator juniper", "Juniperus deppeana", "Drooping juniper", "Juniperus flaccida", "Oneseed juniper", "Juniperus monosperma", "Western juniper", "Juniperus occidentalis", "Utah juniper", "Juniperus osteosperma", "Pinchot juniper", "Juniperus pinchotii", "Rocky mountain juniper", "Juniperus scopulorum", "Eastern redcedar", "Juniperus virginiana", "Tamarack", "Larix laricina", "Subalpine larch", "Larix lyallii", "Western larch", "Larix occidentalis", "Norway spruce", "Picea abies", "Brewer spruce", "Picea breweriana", "Engelmann spruce", "Picea engelmannii", "White spruce", "Picea glauca", "Black spruce", "Picea mariana", "Blue spruce", "Picea pungens", "Red spruce", "Picea rubens", "Sitka spruce", "Picea sitchensis", "Whitebark pine", "Pinus albicaulis", "Bristlecone pine", "Pinus aristata", "Arizona pine", "Pinus arizonica", "Knobcone pine", "Pinus attenuata", "Foxtail pine", "Pinus balfouriana", "Jack pine", "Pinus banksiana", "Mexican pinyon pine", "Pinus cembroides", "Sand pine", "Pinus clausa", "Lodgepole pine", "Pinus contorta", "Coulter pine", "Pinus coulteri", "Border pinyon", "Pinus discolor", "Shortleaf pine", "Pinus echinata", "Common pinyon", "Pinus edulis", "Slash pine", "Pinus elliottii", "Apache pine", "Pinus engelmannii", "Limber pine", "Pinus flexilis", "Spruce pine", "Pinus glabra", "Jeffrey pine", "Pinus jeffreyi", "Sugar pine", "Pinus lambertiana", "Chihuahua pine", "Pinus leiophylla", "Great basin bristlecone pine", "Pinus longaeva", "Singleleaf pinyon", "Pinus monophylla", "Western white pine", "Pinus monticola", "Bishop pine", "Pinus muricata", "Austrian pine", "Pinus nigra", "Longleaf pine", "Pinus palustris", "Ponderosa pine", "Pinus ponderosa", "Table mountain pine", "Pinus pungens", "Four-leaf or parry pinyon pine", "Pinus quadrifolia", "Monterey pine", "Pinus radiata", "Papershell pinyon pine", "Pinus remota", "Red pine", "Pinus resinosa", "Pitch pine", "Pinus rigida", "Gray or california foothill pine", "Pinus sabiniana", "Pond pine", "Pinus serotina", "Southwestern white pine", "Pinus strobiformis", "Eastern white pine", "Pinus strobus", "Scotch pine", "Pinus sylvestris", "Loblolly pine", "Pinus taeda", "Torrey pine", "Pinus torreyana", "Virginia pine", "Pinus virginiana", "Washoe pine", "Pinus washoensis", "Bigcone douglas-fir", "Pseudotsuga macrocarpa", "Douglas-fir", "Pseudotsuga menziesii", "Redwood", "Sequoia sempervirens", "Giant sequoia", "Sequoiadendron giganteum", "Pondcypress", "Taxodium ascendens", "Bald cypress", "Taxodium distichum", "Montezuma baldcypress", "Taxodium mucronatum", "Pacific yew", "Taxus brevifolia", "Florida yew", "Taxus floridana", "Eastern white cedar", "Thuja occidentalis", "Western redcedar", "Thuja plicata", "Eastern hemlock", "Tsuga canadensis", "Carolina hemlock", "Tsuga caroliniana", "Western hemlock", "Tsuga heterophylla", "Mountain hemlock", "Tsuga mertensiana"];
			var coniferSpeciesList = ["fir spp", "abies spp", "white cedar spp", "chamaecyparis spp", "cypress spp", "cupressus spp", "redcedar juniper spp", "juniperus spp", "larch spp", "larix spp", "spruce spp", "picea spp", "pine spp", "pinus spp", "douglas fir spp", "pseudotsuga spp", "baldcypress spp", "taxodium spp", "yew spp", "taxus spp", "thuja spp", "hemlock spp", "tsuga spp", "pacific silver fir", "abies amabilis", "balsam fir", "abies balsamea", "bristlecone fir", "abies bracteata", "white fir", "abies concolor", "fraser fir", "abies fraseri", "grand fir", "abies grandis", "subalpine fir", "abies lasiocarpa", "california red fir", "abies magnifica", "noble fir", "abies procera", "shasta red fir", "abies shastensis", "port orford cedar", "chamaecyparis lawsoniana", "alaska yellow cedar", "chamaecyparis nootkatensis", "atlantic white cedar", "chamaecyparis thyoides", "arizona cypress", "cupressus arizonica", "modoc cypress", "cupressus bakeri", "tecate cypress", "cupressus forbesii", "macnabs cypress", "cupressus macnabiana", "monterey cypress", "cupressus macrocarpa", "sargents cypress", "cupressus sargentii", "ashe juniper", "juniperus ashei", "california juniper", "juniperus californica", "redberry juniper", "juniperus coahuilensis", "alligator juniper", "juniperus deppeana", "drooping juniper", "juniperus flaccida", "oneseed juniper", "juniperus monosperma", "western juniper", "juniperus occidentalis", "utah juniper", "juniperus osteosperma", "pinchot juniper", "juniperus pinchotii", "rocky mountain juniper", "juniperus scopulorum", "eastern redcedar", "juniperus virginiana", "tamarack", "larix laricina", "subalpine larch", "larix lyallii", "western larch", "larix occidentalis", "norway spruce", "picea abies", "brewer spruce", "picea breweriana", "engelmann spruce", "picea engelmannii", "white spruce", "picea glauca", "black spruce", "picea mariana", "blue spruce", "picea pungens", "red spruce", "picea rubens", "sitka spruce", "picea sitchensis", "whitebark pine", "pinus albicaulis", "bristlecone pine", "pinus aristata", "arizona pine", "pinus arizonica", "knobcone pine", "pinus attenuata", "foxtail pine", "pinus balfouriana", "jack pine", "pinus banksiana", "mexican pinyon pine", "pinus cembroides", "sand pine", "pinus clausa", "lodgepole pine", "pinus contorta", "coulter pine", "pinus coulteri", "border pinyon", "pinus discolor", "shortleaf pine", "pinus echinata", "common pinyon", "pinus edulis", "slash pine", "pinus elliottii", "apache pine", "pinus engelmannii", "limber pine", "pinus flexilis", "spruce pine", "pinus glabra", "jeffrey pine", "pinus jeffreyi", "sugar pine", "pinus lambertiana", "chihuahua pine", "pinus leiophylla", "great basin bristlecone pine", "pinus longaeva", "singleleaf pinyon", "pinus monophylla", "western white pine", "pinus monticola", "bishop pine", "pinus muricata", "austrian pine", "pinus nigra", "longleaf pine", "pinus palustris", "ponderosa pine", "pinus ponderosa", "table mountain pine", "pinus pungens", "four leaf or parry pinyon pine", "pinus quadrifolia", "monterey pine", "pinus radiata", "papershell pinyon pine", "pinus remota", "red pine", "pinus resinosa", "pitch pine", "pinus rigida", "gray or california foothill pine", "pinus sabiniana", "pond pine", "pinus serotina", "southwestern white pine", "pinus strobiformis", "eastern white pine", "pinus strobus", "scotch pine", "pinus sylvestris", "loblolly pine", "pinus taeda", "torrey pine", "pinus torreyana", "virginia pine", "pinus virginiana", "washoe pine", "pinus washoensis", "bigcone douglas fir", "pseudotsuga macrocarpa", "douglas fir", "pseudotsuga menziesii", "redwood", "sequoia sempervirens", "giant sequoia", "sequoiadendron giganteum", "pondcypress", "taxodium ascendens", "bald cypress", "taxodium distichum", "montezuma baldcypress", "taxodium mucronatum", "pacific yew", "taxus brevifolia", "florida yew", "taxus floridana", "eastern white cedar", "thuja occidentalis", "western redcedar", "thuja plicata", "eastern hemlock", "tsuga canadensis", "carolina hemlock", "tsuga caroliniana", "western hemlock", "tsuga heterophylla", "mountain hemlock", "tsuga mertensiana"];
			
			$(document).ready(function(){
				loadBackgroundImage($("#splashImage"), "../images/splash.png");
				loadCircles();
			});
			$(window).resize(function(){
				$('.ui-autocomplete').css({display:"none"});
			});

			function inArrayIgnoreCaseAndWhitespace(needle, haystack){
				for(var i = 0; i < haystack.length; i++){
					if(haystack[i].replace(/\s\s+/g, ' ').trim().toLowerCase() == needle.replace(/\s\s+/g, ' ').trim().toLowerCase()){return true;}
				}
				return false;
			}

			function getWordAtIndex(str, index){
				var left = str.slice(0, index + 1).search(/\S+$/);
				var right = str.slice(index).search(/\s/);
				if (right < 0) {return str.slice(left);}
				return str.slice(left, right + index);
			}
			function attachAutoCompleteToInput(inputElement, sourceList){
				$(inputElement).autocomplete({
					minLength: 2,
					source: function(request, response) {
						var results = $.ui.autocomplete.filter(sourceList, request.term);
						results.sort(function(a, b){
							a = a.toLowerCase();
							b = b.toLowerCase();
							var term = request.term.toLowerCase();

							//how close to the beginning of a word
							var aWord = getWordAtIndex(a, a.indexOf(term));
							var bWord = getWordAtIndex(b, b.indexOf(term));
							var diff = aWord.indexOf(term) - bWord.indexOf(term);
							if(diff !== 0) return diff;

							//tiebreaker prioritize first word results
							var aFirstWord = a.split(" ").indexOf(aWord) == 0;
							var bFirstWord = b.split(" ").indexOf(bWord) == 0;
							if(aFirstWord && !bFirstWord) return -1;
							else if(bFirstWord && !aFirstWord) return 1;

							//tiebreaker is how close to the beginning of the string
							//var diff = a.indexOf(term) - b.indexOf(term);
							//if(diff !== 0){return diff;}

							//tiebreaker alphabetical
							if(a < b) return -1;
    						if(a > b) return 1;
    						return 0;
						});
						response(results);
						//response(results.slice(0, 10));
					},
					open: function(event, ui) {
						var idNumber = ($("input").index(this) + 1);
						$('#ui-id-' + idNumber).off('menufocus hover mouseover mouseenter');

            					var left = $('#ui-id-' + idNumber).position().left;
						var leftOffset = 0;
						if($(window).width() < 771){
							leftOffset = 45;
						}
						else if($(window).width() < 1000){
							leftOffset = 125;
						}
        					$('#ui-id-' + idNumber).css({left: (left - leftOffset) + "px"});
					}
				});
			}
			
			function isKnownConifer(plantSpeciesName){
				plantSpeciesName = plantSpeciesName.replace(/[^A-Za-z]+/g," ").replace(/\s\s+/g, ' ').trim().toLowerCase();
				
				if(plantSpeciesName == ""){
					return false;
				}
				
				if(coniferSpeciesList.indexOf(plantSpeciesName) > -1){
					return true;
				}
				
				var prefixes = ["abies", "chamaecyparis", "juniperus", "larix", "picea", "pinus", "pseudotsuga", "taxodium", "taxus", "thuja", "tsuga"];
				for(var i = 0; i < prefixes.length; i++){
					if((" " + plantSpeciesName).indexOf(" " + prefixes[i])> -1){
						return true;
					}
				}
				
				var suffixes = ["fir", "cedar", "juniper", "larch", "spruce", "pine", "cypress", "yew", "hemlock"];
				var plantSpeciesNameParts = plantSpeciesName.split(" ");
				return suffixes.indexOf(plantSpeciesNameParts[plantSpeciesNameParts.length - 1]) > -1;
			}
			
			lastManualConiferSettings = {};
			function setConifer(plantSpeciesInput){
				//this function is called whenever value of #plantSpecies changes
				var plantSpecies = plantSpeciesInput.value;
				
				//if we recognize it
				if(isKnownConifer(plantSpecies)){
					//check and gray out
					$("#checkboxTableOverlay" + plantSpeciesInput.id).css({display: "block"});
					$("#checkboxTable" + plantSpeciesInput.id).css({opacity: ".5"});
					checkCheckbox($("#coniferCheckbox" + plantSpeciesInput.id));
				}
				else if(inArrayIgnoreCaseAndWhitespace(plantSpecies, plantSpeciesList)){
					//uncheck and gray out
					$("#checkboxTableOverlay" + plantSpeciesInput.id).css({display: "block"});
					$("#checkboxTable" + plantSpeciesInput.id).css({opacity: ".5"});
					uncheckCheckbox($("#coniferCheckbox" + plantSpeciesInput.id));
				}
				else{
					//ungray
					$("#checkboxTableOverlay" + plantSpeciesInput.id).css({display: "none"});
					$("#checkboxTable" + plantSpeciesInput.id).css({opacity: "1"});
					
					//revert to last manual selection
					if(lastManualConiferSettings[plantSpeciesInput.id] === true){
						if(!checkboxIsChecked($("#coniferCheckbox" + plantSpeciesInput.id))){
							checkCheckbox($("#coniferCheckbox" + plantSpeciesInput.id));
						}
					}
					else if(checkboxIsChecked($("#coniferCheckbox" + plantSpeciesInput.id))){
						uncheckCheckbox($("#coniferCheckbox" + plantSpeciesInput.id));
					}
				}
			}

			function loadCircles(){
				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						if(this.responseText.indexOf("true|") == 0){
							var data = JSON.parse(this.responseText.replace("true|", ""));
							var siteName = data[0];
							var circles = data[1];

							$(".tagline").eq(0)[0].innerHTML = "in " + siteName;
							populateCircles(circles);
						}
						else{
							var error = this.responseText.replace("false|", "");

							$(".tagline").eq(0)[0].innerHTML = "Could not load.";
							$("#error")[0].onclick = function(){window.location = "../manageMySites";};
							$("#noticeInteractionBlock")[0].onclick = function(){window.location = "../manageMySites";};
							queueNotice("error", error);
							if(error == "Your log in dissolved. Maybe you logged in on another device."){
								logOut();
							}
						}
					}
				};
				xhttp.open("GET", "../php/getPlantsDataBySite.php?siteID=" + encodeURIComponent(window.location.toString().substring(window.location.toString().indexOf("?s=") + 3)) + "&email=" + encodeURIComponent(window.localStorage.getItem("email")) + "&salt=" + window.localStorage.getItem("salt"), true);
				xhttp.send();
			}

			function populateCircles(circles){
				//[[circle(int), [[orientation, code, plantSpecies]]]]
				//sort circles
				circles = circles.sort(function(a,b){return a[0] - b[0];});

				var htmlToAdd = "";
				for(var i = 0; i < circles.length; i++){
					htmlToAdd += getCircleHTML(circles[i]);
				}
				$("#circles")[0].innerHTML = htmlToAdd;
				
				var plantSpeciesInputs = $(".plantSpeciesInput");
				for(var i = 0; i < plantSpeciesInputs.length; i++){
					setConifer(plantSpeciesInputs[i]);
				}
				
				$("#addNewCircle")[0].style.display = "block";
				if(circles.length > 0){
					$("#saveAllButton")[0].style.display = "block";
					attachAutoCompleteToInput($("input"), plantSpeciesList);
				}
			}

			function getCircleHTML(circle){
				if(circle.length != 2){return "";}
				for(var i = 0; i < circle[1].length; i++){
					if(circle[1][i].length != 4){return "";}
				}

				//sort plants
				var plants = circle[1].sort(function(a,b){
					if(a[0] < b[0]){return -1;}
					if(a[0] > b[0]){return 1;}
					return 0;
				});
				var noticeImage = "<img src=\"../images/notice.png\" class=\"noticeImage\" style=\"display:none;\"/>";
				for(var j = 0; j < plants.length; j++){
					if(plants[j][2].trim().toUpperCase() == "N/A"){
						noticeImage = "<img src=\"../images/notice.png\" class=\"noticeImage\"/>";
						break;
					}
				}
				var htmlToAdd = "<div class=\"circle\">";
				htmlToAdd += 	"<div class=\"circleTitle\" onclick=\"togglePlants(this.parentNode);\">Circle " + circle[0] + noticeImage + "</div>";
				htmlToAdd += 	"<div class=\"plants\">";
				for(var j = 0; j < plants.length; j++){
					var noticeBorder = "";
					if(plants[j][2].trim().toUpperCase() == "N/A"){
						noticeBorder = " style=\"border-right:5px solid #FF645A;\"";
					}
					
					htmlToAdd += "<div class=\"plant\">";
					htmlToAdd += 	"<div class=\"code\"><img src='../images/tag" + (j + 1) + ".png'/>" + plants[j][1] + "</div>";
					htmlToAdd += 	"<div class=\"editableFields\">";
					htmlToAdd += 		"<div class=\"editableFieldTitle\">Plant Species:</div>";
					htmlToAdd += 		"<input type=\"text\" id=\"" + plants[j][1] + "\" class=\"plantSpeciesInput\" value=\"" + plants[j][2] + "\"" + noticeBorder + " onfocus=\"this.setSelectionRange(0, 9999);setNoticeExemptingInput(this.parentNode.parentNode.parentNode.parentNode, this);\" onblur=\"if(this.value.trim().toUpperCase() == 'N/A' || this.value.replace(/ /g, '') == ''){this.value = 'N/A';setNoticeImage(this.parentNode.parentNode.parentNode.parentNode);}else if(inArrayIgnoreCaseAndWhitespace(this.value, plantSpeciesList)){setNoticeImage(this.parentNode.parentNode.parentNode.parentNode);}else{promptConfirm('&quot;' + this.value + '&quot; is not in our records. Have you searched for other labels? Are you sure this is the correct name and spelling of your tree species?', 'Try again.', 'Continue. I am sure!', function(){document.getElementById('" + plants[j][1] + "').focus();}, function(){setNoticeImage(document.getElementById('" + plants[j][1] + "').parentNode.parentNode.parentNode.parentNode);});}\" oninput=\"setConifer(this);\"/>";
					htmlToAdd +=		"<div class=\"checkboxTableHolder\">";
					htmlToAdd +=			"<table class=\"checkboxTable\" id=\"checkboxTable" + plants[j][1] + "\">";
					htmlToAdd +=				"<tr onclick=\"toggleCheckbox($(this).find('.checkbox'));lastManualConiferSettings['" + plants[j][1] + "'] = $(this).has('.checked').length > 0;\">";
					htmlToAdd +=					"<td><div class=\"checkbox" + (plants[j][3] ? " checked" : "") + "\" id=\"coniferCheckbox" + plants[j][1] + "\"></div></td>";
					htmlToAdd +=					"<td>This plant is coniferous.</td>";
					htmlToAdd +=					"<td onclick=\"event.stopPropagation();queueNotice('alert', 'Coniferous plants bear cones and have needle-like or scale-like leaves that are typically evergreen.<br/><br/><img src=\\'../images/conifer.jpeg\\'/>');\"><img src=\"../images/question.png\"/></td>";
					htmlToAdd +=				"<tr>";
					htmlToAdd +=			"</table>";
					htmlToAdd +=			"<div id=\"checkboxTableOverlay" + plants[j][1] + "\" class=\"checkboxTableOverlay\" onclick=\"queueNotice('alert', 'We\\'ve recognized this plant species and set its &quot;conifer&quot; checkbox automatically, so it is not editable.');\"></div>";
					htmlToAdd +=		"</div>";
          				htmlToAdd += 		"<div class=\"editableFieldTitle\">Location change:</div>";
					htmlToAdd +=		"<table class=\"checkboxTable\">";
					htmlToAdd +=			"<tr onclick=\"toggleCheckbox($(this).find('.checkbox'));\">";
					htmlToAdd +=				"<td><div class=\"checkbox\" id=\"moveCheckbox" + plants[j][1] + "\"></div></td>";
					htmlToAdd +=				"<td>I am moving this code to identify a more suitable tree.</td>";
					htmlToAdd +=				"<td onclick=\"event.stopPropagation();queueNotice('alert', 'If a tag with the code &quot;" + plants[j][1] + "&quot; is hanging on a tree that is dead or otherwise no longer suitable to collect surveys with, check this checkbox and move that tag to another nearby tree. If the new tree is of a different species than the unsuitable tree, go ahead and change the plant species as well. Make sure to click the &quot;Save All&quot; button at the bottom of the page before exiting the page.');\"><img src=\"../images/question.png\"/></td>";
					htmlToAdd +=			"<tr>";
					htmlToAdd +=		"</table>";
					htmlToAdd += 	"</div>";
					htmlToAdd += "</div>";
					
					lastManualConiferSettings[plants[j][1]] = plants[j][3];
				}
				htmlToAdd += 	"</div>";
				htmlToAdd += "</div>";
				return htmlToAdd;
			}

			function togglePlants(circle){
				var plants = $(circle).find(".plants").eq(0)[0];

				//reset all
				$(".circle").css({border:"2px solid #eee"});
				$(".plants").stop().animate({maxHeight:"0px"});
				$(".circleTitle").stop().animate({backgroundColor:"#f7f7f7", color:"#aaa"});

				if(plants.style.maxHeight == "" || plants.style.maxHeight == "0px"){
					$(circle).css({border:"0px none transparent"});
					$(plants).stop().animate({maxHeight:"1500px"});
					$(circle).find(".circleTitle").eq(0).stop().animate({backgroundColor:"#444", color:"#fff"});
				}
				else{
					$(plants).stop().animate({maxHeight:"0px"});
				}
			}

			function setNoticeImage(circle){
				var inputs = $(circle).find("input");

				var showNotice = false;
				for(var i = 0; i < inputs.length; i++){
					if(inputs.eq(i)[0].value.trim().toUpperCase() == "N/A"){
						showNotice = true;
						inputs.eq(i)[0].style.borderRight = "5px solid #FF645A";
					}
					else{
						inputs.eq(i)[0].style.borderRight = "";
					}
				}

				if(showNotice){
					$(circle).find(".noticeImage").eq(0)[0].style.display = "block";
				}
				else{
					$(circle).find(".noticeImage").eq(0)[0].style.display = "none";
				}
			}

			function setNoticeExemptingInput(circle, exemptInput){
				var inputs = $(circle).find("input");

				var showNotice = false;
				for(var i = 0; i < inputs.length; i++){
					if(inputs.eq(i)[0] != $(exemptInput)[0] && inputs.eq(i)[0].value.trim().toUpperCase() == "N/A"){
						showNotice = true;
						inputs.eq(i)[0].style.borderRight = "5px solid #FF645A";
					}
					else{
						inputs.eq(i)[0].style.borderRight = "";
					}
				}

				if(showNotice){
					$(circle).find(".noticeImage").eq(0)[0].style.display = "block";
				}
				else{
					$(circle).find(".noticeImage").eq(0)[0].style.display = "none";
				}
			}

			var saving = false;
			function saveAll(){
				if(saving){return false;}

				saving = true;
				setLoadingButton($("#saveAllButton")[0], "Save all", true);

				var plantData = [];
				var inputs = $("input");
				for(var i = 0; i < inputs.length; i++){
					plantData[plantData.length] = [inputs.eq(i)[0].id, encodeURIComponent(inputs.eq(i)[0].value.replace(/\s\s+/g, ' ')), checkboxIsChecked($("#moveCheckbox" + inputs.eq(i)[0].id)), checkboxIsChecked($("#coniferCheckbox" + inputs.eq(i)[0].id))];
				}

				var formData = new FormData();
				formData.append("plantData", JSON.stringify(plantData));
				formData.append("email", window.localStorage.getItem("email"));
				formData.append("salt", window.localStorage.getItem("salt"));
				$.ajax({
					url : "https://caterpillarscount.unc.edu/php/saveAllPlantSpecies.php",
					type : 'POST',
					data : formData,
					processData: false,  // tell jQuery not to process the data
					contentType: false,  // tell jQuery not to set contentType
					success : function(data) {
						if(data.indexOf("true|") == "0"){
							queueNotice("confirmation", "Saved!");
							$("#confirmation")[0].onclick = function(){window.location = "../manageMySites";};
							$("#noticeInteractionBlock")[0].onclick = function(){window.location = "../manageMySites";};
						}
						else{
							var savingError = data.replace("false|", "");
							queueNotice("error", savingError);
							if(savingError == "Your log in dissolved. Maybe you logged in on another device."){
								logOut();
							}
						}
					},
					error : function(request, status, error){
						queueNotice("error", request.responseText);
					},
					complete: function() {
						saving = false;
						setLoadingButton($("#saveAllButton")[0], "Save all", false);
						$('html, body').animate({ scrollTop: document.getElementById("splashImage").clientHeight }, 'slow');
					}
				});
			}

			var adding = false;
			function addNewCircle(){
				if(adding){return false;}

				adding = true;
				$("#addNewCircle")[0].innerHTML = "Adding New Circle...";
				//setLoadingButton($("#saveAllButton")[0], "Save all", true);

				var samplePlantCode = "";
				if($("input").length > 0){
					samplePlantCode = $("input").eq(0)[0].id;
				}

				var xhttp = new XMLHttpRequest();
				xhttp.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						adding = false;
						$("#addNewCircle")[0].innerHTML = "Add New Circle<div class=\"plusImage\" style=\"background-image:url('../images/plus.png');\"></div>";
						//setLoadingButton($("#saveAllButton")[0], "Save all", false);
						if(this.responseText.indexOf("true|") == "0"){
							var newPlants = JSON.parse(this.responseText.replace("true|", ""));
							$("#circles").append(getCircleHTML([($(".circle").length + 1), newPlants]));
							attachAutoCompleteToInput($(".circle").eq($(".circle").length - 1).find("input"), plantSpeciesList);
						}
						else{
							$('html, body').animate({ scrollTop: document.getElementById("splashImage").clientHeight }, 'slow');
							var addingError = this.responseText.replace("false|", "");
							queueNotice("error", addingError);
							if(addingError == "Your log in dissolved. Maybe you logged in on another device."){
								logOut();
							}
						}
					}
				};
				xhttp.open("GET", "../php/addCircle.php?samplePlantCode=" + encodeURIComponent(samplePlantCode) + "&email=" + encodeURIComponent(window.localStorage.getItem("email")) + "&salt=" + window.localStorage.getItem("salt"), true);
				xhttp.send();
			}
		</script>
	</head>
	<body>
		<div id="managerRequest">
			<div id="managerRequestMessage"></div>
			<div id="managerRequestButtons">
				<div class="managerRequestButton" onclick="hideNotice();respondToManagerRequest('deny');">Deny</div>
				<div class="managerRequestButton" onclick="hideNotice();respondToManagerRequest('approve');">Accept</div>
			</div>
		</div>
		<div id="error" onclick="hideNotice();"></div>
		<div id="confirmation" onclick="hideNotice();"></div>
		<div id="alert" onclick="hideNotice();"></div>
		<div id="promptInteractionBlock"></div>
		<div id="noticeInteractionBlock" onclick="hideNotice();"></div>
		<div id="confirm">
			<div></div>
			<div>
				<button>OK</button>
				<button>Cancel</button>
				<div class="clearBoth"></div>
			</div>
		</div>

		<div id="splash">
			<div id="splashImage"></div>
			<div id="splashOverlay">
				<div id="splashIntroText">Welcome to</div>
				<div id="splashMainText">Caterpillars Count!</div>
				<button id="splashButton" onclick="this.blur();scrollToPanel(1);">Edit Survey Plants</button>
			</div>
		</div>
		<header>
			<h1><a href="../">Caterpillars Count!</a></h1>
			<div id="hamburger" onclick="toggleNav();">
				<div></div>
				<div></div>
				<div></div>
			</div>
			<div id="navKnockDown" class="clearBoth"></div>
			<nav class="loadingNav">
				<ul>
					<li onclick="accessSubMenu(this);">
						<span>Participate</span>
						<ul onclick="event.stopPropagation();">
							<li class="closeSubmenu" onclick="closeSubmenu(this.parentNode);"><img src="../images/arrow.png"/></li>
							<li><a href="../getStarted">Get Started</a></li>
							<li><a href="../conductASurvey">Conduct a Survey</a></li>
							<li><a href="../submitObservations">Submit Observations</a></li>
							<li><a href="../hostASurveySite">Host a Survey Site</a></li>
							<li><a href="../resources">Resources</a></li>
						</ul>
					</li>
					<li onclick="accessSubMenu(this);">
						<span>Explore</span>
						<ul onclick="event.stopPropagation();">
							<li class="closeSubmenu" onclick="closeSubmenu(this.parentNode);"><img src="../images/arrow.png"/></li>
							<li><a href="../mapsAndGraphs">Maps & Graphs</a></li>
							<li><a href="https://www.inaturalist.org/observations?place_id=any&subview=grid&user_id=caterpillarscount&verifiable=any">Recent Observations</a></li>
							<li><a href="../dataDownload">Data Download</a></li>
						</ul>
					</li>
					<li onclick="accessSubMenu(this);">
						<span>Learn</span>
						<ul onclick="event.stopPropagation();">
							<li class="closeSubmenu" onclick="closeSubmenu(this.parentNode);"><img src="../images/arrow.png"/></li>
							<li><a href="../identificationSkills">Identification Skills</a></li>
							<li><a href="../virtualSurvey">Virtual Survey Game</a></li>
							<li><a href="../forEducators">For Educators</a></li>
						</ul>
					</li>
					<li onclick="window.location = '../news';">
						<span>News</span>
					</li>
					<li onclick="window.location = '../faq';">
						<span>FAQ</span>
					</li>
					<li onclick="window.location = '../signIn';">
						<span>Sign In</span>
						<ul onclick="event.stopPropagation();">
							<li class="closeSubmenu" onclick="closeSubmenu(this.parentNode);"><img src="../images/arrow.png"/></li>
							<li><a href="../createNewSite">Create New Site</a></li>
							<li><a href="../manageMySites">Manage My Sites</a></li>
							<li><a href="../manageMySurveys">Manage My Surveys</a></li>
							<li><a href="../settings">Settings</a></li>
							<li><a href="" onclick="logOut();">Sign Out</a></li>
						</ul>
					</li>
				</ul>
			</nav>
			<div id="navBack" onclick="resetMenu(false);">&#10094;</div>
		</header>
		<main>
			<div class="panel">
				<h2>Edit Survey Plants</h2>
				<div class="tagline">This site's plants are loading. Please wait a moment.</div>
				<div class="content">
					<div id="circles"></div>
					<div id="addNewCircle" onclick="promptConfirm('You cannot remove a circle once it has been created. Are you sure you want to add a new circle?', 'Never mind.', 'Yes, I am sure!', function(){}, addNewCircle);">
						Add New Circle
						<div class="plusImage" style="background-image:url('../images/plus.png');"></div>
					</div>
					<button id="saveAllButton" onclick="saveAll();">Save all</button>
					<div style="text-align:center;margin-bottom:20px;" class="underline"><a href="../manageMySites" style="color:#ccc;font-size:16px;font-family: 'Montserrat', 'Helvetica Neue', Helvetica, Arial, sans-serif;">Cancel</a></div>
				</div>
			</div>
		</main>
		<footer>
			<div>Part of the <a href="http://pheno-mismatch.org" target="_blank">Pheno Mismatch</a> project funded by the National Science Foundation</div>

			<div><img src="../images/unc.png"/></div><div>
				<a target="_blank" href="https://www.facebook.com/Caterpillars-Count-1854259101283140/"><img src="../images/facebook.png" alt="facebook"/></a><a target="_blank" href="https://twitter.com/CaterpillarsCt"><img src="../images/twitter.png" alt="twitter"/></a>
			</div>

			<div>Contact us: <a href="mailto:caterpillarscount@gmail.com">caterpillarscount@gmail.com</a></div>

			<div>View our <a href="../privacyPolicy">privacy policy</a></div>
		</footer>
	</body>
</html>
